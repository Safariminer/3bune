<html>
    <head>
        <title>3BUNE Coin Coin</title>
        <style>
            
            body{
                background-image: url("dandelion.jpg");
            }
            .vert {
                float: left;
                height: 90%;
                padding: 0 10px;
            }

            .send{
                background: rgb(65,101,181);
                background: linear-gradient(0deg, rgba(65,101,181,1) 42%, rgba(53,168,204,1) 84%, rgba(0,212,255,1) 100%); 
                /*border: none;*/
                border-color: black;
                color: white;
                padding: 15px 32px;
                text-align: center;
                text-decoration: none;
                display: inline-block;
                border-radius:5px;
                font-size: 16px;
            }
            .textinput{
                background: rgb(180,180,180);
                background: linear-gradient(0deg, rgba(180,180,180,1) 42%, rgba(217,217,217,1) 65%, rgba(255,255,255,1) 100%); 
                /*border: none;*/
                border-style: solid;
                border-color: black;
                padding: 15px 32px;
                text-decoration: none;
                display: inline-block;
                border-radius:2px;
                font-size: 16px;
            }
        </style>
    </head>
    <body>
        <script src="https://code.jquery.com/jquery-3.6.1.min.js"></script>
        <div class="vert" style="background-color: #5bcefa80; border-radius: 50px 0px 0px 50px; width: 25%; text-align: center;">
            <h1>\\\ 3BUNE</h1>
            <h2>Frutiger Tribune Coin-coin</h2>
            <p>Welcome to 3BUNE! 3BUNE is a small PHP tribune server designed for ease of setup.</p>
            <input type="text" id="ua" class="textinput" style="width: 100%;" placeholder="User-Agent"/>
        </div>
        <div class="vert"></div>
        <div class="vert" style="background-color: #000000A0; width: 71%; border-radius: 0px 50px 50px 0px;">
            <iframe frameBorder="0" width="98%" height="90%" src="frontend.php#end" id="chatiframe"></iframe>
            <input type="text" id="message" class="textinput" style="width: 92%;" placeholder="Message..."/><button id="send" class="send" onclick="PostToServer()">Send</button>
        </div>
        <br/>
        <div style="text-align: center;"><a style="color:white" href="https://pixabay.com/fr/photos/pissenlit-prairie-prairie-pissenlit-3382663/">Background Image</a></div>
    </body>
    <script>
        var intervalID = window.setInterval(refreshIframe, 5000);

        var focused = document.activeElement;

        document.onkeypress = function (e) {
            if (e.keyCode == 13) PostToServer();
        };
        

        function refreshIframe() {
            document.getElementById('chatiframe').contentDocument.location.reload(true);
        }

        function sleep(milliseconds) {
            const date = Date.now();
            let currentDate = null;
            do {
                currentDate = Date.now();
            } while (currentDate - date < milliseconds);
        }
        function PostToServer(){
            
            fetch('/icc_post.php?ua=' + document.getElementById('ua').value.trim().replace(/\s/g, '%20') + "&message="+ document.getElementById('message').value.trim().replace(/\s/g, '%20'));
            
            sleep(30);
            document.getElementById('chatiframe').contentDocument.location.reload(true);
            document.getElementById('message').value = "";
            
        }
    </script>
</html>